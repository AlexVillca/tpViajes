@if(logueado){
  @if(visible){
    <div class="popup-overlay"></div>
    <div class="popup-content">

      <h3>Guardar en colección</h3>

      <form [formGroup]="formulario" (ngSubmit)="saveSelection()">

        <div [formGroup]="groupCheckbox">
          <div *ngFor="let idLista of idsGroupCheckbox">
            <label>
              <input type="checkbox" [formControlName]="idLista" />
              {{ mapNombresListas.get(idLista) }}
            </label>
          </div>
        </div>

        <div class="agregar">
          <input type="text" class="" formControlName="nuevocheckboxListaFavorito" placeholder="Nueva lista" maxlength="20" />
          <button type="button" class="button-agregar" (click)="agregarNuevaLista()">Agregar</button>
        </div>
        <small *ngIf="alertaMax" class="error">Se ha llegado al máximo de listas</small>
        <div class="container">
          <button type="button" (click)="cancelar()">Cancelar</button>
          <button type="submit">Guardar cambios</button>
        </div>
      </form>


    </div>
  }@else{
  <button (click)="visible=true">Guardar</button>
  }

}
